<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.37" />

  <title>Software Design - Dependency Injection and Inversion &middot; Eddie Abbondanzio</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://EddieAbbondanzio.github.io/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://EddieAbbondanzio.github.io/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://EddieAbbondanzio.github.io/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/railscasts.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  

  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://EddieAbbondanzio.github.io/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://EddieAbbondanzio.github.io/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://EddieAbbondanzio.github.io/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/EAbbondanzio" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/EddieAbbondanzio" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div style="position: absolute; bottom: 0px;">
  <div class="small-print">
    <small>&copy; 2016. All rights reserved.</small>
  </div>
  <div class="small-print" style="text-align: center">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">

<div class="header">
  <h1>Software Design - Dependency Injection and Inversion</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>18 Oct 2018, 06:34</time>
  </div>

  

  

  

</div>

  

<h2 id="what-are-they">What are they?</h2>

<p>While it may seem like nothing more than buzz words, dependency injection is a well known principle. In fact, you&rsquo;ve likely used it yourself in the past and just didn&rsquo;t know the technique had a name. Dependency injection can be thought of as passing a resource required by a class to the class through one of several means. While the class could instantiate a new instance of the resource itself, by using dependency injection we introduce an easier way to take advantage of dependency inversion.</p>

<p>Dependency inversion sounds similar but is a slightly different principle. In simple terms, dependency inversion prevents high level modules from relying upon low level modules through the use of an abstraction. This inverts the dependency such that the higher level class no longer relies upon a concrete implementation, and can utilize any resource that complies with the dependency contract defined through the abstraction.</p>

<p>Dependency injection comes in three different flavors:</p>

<ul>
<li>Constructor injection</li>
<li>Method injection</li>
<li>Property injection</li>
</ul>

<h2 id="constructor-injection">Constructor injection</h2>

<p>Constructor injection is where the dependency is passed to the dependent class directly through it&rsquo;s constructor. This method should be used when the dependent is reliant upon the dependency in such a way that the dependent cannot function without it.</p>

<h2 id="method-property-injection">Method / Property injection</h2>

<p>Since these two are similar in nature we&rsquo;ll combine them. Method injection is when the dependency is passed to the dependent class via a method. Property injection on the other hand, is where the dependency is injected via a setter property on the dependent. These should be used when a class has a dependency but isn&rsquo;t fully reliant upon it. The dependent class should be able to still function in some manner without it.</p>

<h2 id="a-working-example">A Working Example</h2>

<p>Imagine we are designing an <code>EmailInbox</code> that needs to be able to send and receive emails. The <code>EmailInbox</code> will depend on an <code>EmailService</code> for communicating with the network.</p>

<pre><code class="language-csharp">    public class EmailService {
        public List&lt;Email&gt; CheckForEmails() {
            //Non-important implementation...
        }

        public void SendEmail(Email email){
            //Blah blah blah
        }
    }
</code></pre>

<p>Since an <code>EmailInbox</code> would be pretty useless without the <code>EmailService</code>, we could argue this would be a good use of constructor injection.</p>

<pre><code class="language-csharp">    public class EmailInbox {
        private EmailService EmailService { get; set; }

        public EmailInbox(EmailService emailService) {
            this.EmailService = emailService;
        }
    }
</code></pre>

<p>This works decently, but our <code>EmailInbox</code> is restricted to a single email service. What if we want to expand it&rsquo;s compatibility to support other email services? For this, we could take advantage of dependency inversion. The first step would be to define our dependencies contract via an interface.</p>

<pre><code class="language-csharp">    public interface IEmailService {
        List&lt;Email&gt; CheckForEmails();

        void SendEmail(Email email);
    }
</code></pre>

<p>Now we need to update our <code>EmailInbox</code> to rely on interface references.</p>

<pre><code class="language-csharp">    public class EmailInbox {
        private IEmailService EmailService { get; set; }

        public EmailInbox(IEmailService emailService) {
            this.EmailService = emailService;
        }
    }
</code></pre>

<p>And just like that we have utilized dependency inversion to no longer be reliant upon the lower level module (<code>EmailService</code>). Now the <code>EmailInbox</code> can be created with any <code>EmailService</code> that can implements the interface <code>IEmailService</code>.</p>

<pre><code class="language-csharp">    public class GmailEmailService : IEmailService {
        ...
    }

    public class HotmailEmailService : IEmailService {
        ...
    }

    //Create a new Gmail based inbox.
    IEmailService gmailService = new GmailEmailService();
    EmailInbox gmailInbox = new EmailInbox(gmailService);

    //Create a new Hotmail based inbox.
    IEmailService hotmailService = new HotmailEmailService();
    EmailInbox hotmailInbox = new EmailInbox(hotmailService);
</code></pre>

<p>These two concepts can be easy to confuse since they share such similar names, and are used together. Hopefully this article helped clarify them.</p>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://EddieAbbondanzio.github.io/post/software-design/test-types/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://EddieAbbondanzio.github.io/post/software-design/test-types/">Software Design - Unit Tests vs Integration Tests</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="https://EddieAbbondanzio.github.io/post/cherokee/18-10-21/">Cherokee Build - 10/21/18</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="https://EddieAbbondanzio.github.io/post/cherokee/18-10-21/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  

</div>

</div>
</div>
<script src="https://EddieAbbondanzio.github.io/js/ui.js"></script>


<script>
  
  if (window.location.hostname != "localhost") {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-128571017-1', 'auto');
    ga('send', 'pageview');
  }
</script>





</body>
</html>

